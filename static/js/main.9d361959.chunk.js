(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{105:function(e,t,a){e.exports=a(140)},110:function(e,t,a){},111:function(e,t,a){},134:function(e,t,a){},136:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){"use strict";a.r(t);var n,r,c=a(0),l=a.n(c),o=a(10),i=a.n(o),s=(a(110),a(19)),u=(a(111),a(51)),m=a(7),d=a.n(m),p=a(20),b=a(25),f=a(62),E=a(66),h=a(173),g=a(190),O=a(178),j=a(194),v=a(11),k=a(191),y=a(29),N=a(196),w=Object(N.a)("GET_AUTH_REQUEST"),A=Object(N.a)("GET_AUTH_SUCCESS"),_=Object(N.a)("GET_AUTH_FAILURE"),S=Object(N.a)("LOGOUT_USER"),x=Object(k.a)((n={},Object(v.a)(n,A,(function(e,t){return t.payload.token})),Object(v.a)(n,_,(function(){return null})),Object(v.a)(n,S,(function(){return null})),n),null),C=Object(k.a)((r={},Object(v.a)(r,A,(function(){return!0})),Object(v.a)(r,_,(function(){return!1})),Object(v.a)(r,S,(function(){return null})),r),!1),F=Object(k.a)(Object(v.a)({},_,(function(e,t){return"\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438"})),null),z=Object(y.c)({token:x,isAuthorized:C,error:F}),T=a(52),U=a.n(T),I=function(e){return e.token},L=function(e){return e.isAuthorized},P=function(e){return e.error},q=(a(134),{fetchAuthRequest:w,logout:S}),R=Object(b.b)((function(e){return{isAuthorized:L(e),error:P(e)}}),q)((function(e){var t=Object(f.a)(),a=t.register,n=t.handleSubmit,r=t.errors,o=t.setValue,i=e.fetchAuthRequest,u=e.isAuthorized,m=e.error,b=Object(c.useState)(!1),v=Object(s.a)(b,2),k=v[0],y=v[1];Object(c.useEffect)((function(){o("login","test_super"),o("password","Nf<U4f<rDbtDxAPn"),null!=m&&y(!0)}),[u,m,o]);var N=function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.login,n=t.password,e.next=3,i({login:a,password:n});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement("div",{className:"divForForm"},l.a.createElement(h.a,{className:"cardForForm"},l.a.createElement("form",{onSubmit:n(N)},l.a.createElement(E.a,{as:l.a.createElement(g.a,{className:"textFieldForLoginForm",label:"\u041b\u043e\u0433\u0438\u043d",color:"secondary",type:"text",error:null!=r.login}),rules:{required:!0},helperText:G(r.login),name:"login",register:a,setValue:o}),l.a.createElement("br",null),l.a.createElement(E.a,{as:l.a.createElement(g.a,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",color:"secondary",type:"text",className:"textFieldForLoginForm",error:null!=r.password}),helperText:G(r.password),rules:{required:!0},name:"password",register:a,setValue:o}),l.a.createElement("br",null),l.a.createElement(O.a,{type:"submit",value:"\u0412\u043e\u0439\u0442\u0438"},"\u0412\u043e\u0439\u0442\u0438"))),l.a.createElement(j.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:k,onClose:function(){y(!1)},ContentProps:{"aria-describedby":"message-id"},message:l.a.createElement("span",{id:"message-id"},m)}))}));function G(e){return void 0!==e&&"required"===e.type?"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e":null}var D=function(e){return l.a.createElement(R,e)},H=a(15),V=a(91),B=function(e){var t=e.component,a=e.isAuthorized,n=e.loginPath,r=Object(V.a)(e,["component","isAuthorized","loginPath"]);return l.a.createElement(H.b,Object.assign({},r,{render:function(e){return a?l.a.createElement(t,e):l.a.createElement(H.a,{to:n})}}))},J=a(18),W=a(179),Y=a(141),K=a(195),Q=a(197),$=a(180),M=a(181),X=a(182),Z=a(183),ee=a(184),te=a(185),ae=a(89),ne=a.n(ae),re=(a(136),Object(b.b)((function(e){return{isAuthorized:L(e),token:I(e)}}))((function(e){var t=e.token,a=Object(c.useState)([]),n=Object(s.a)(a,2),r=n[0],o=n[1],i=Object(c.useState)([]),u=Object(s.a)(i,2),m=u[0],b=u[1],f=l.a.useState("asc"),E=Object(s.a)(f,2),h=E[0],g=E[1],O=Object(c.useState)(""),j=Object(s.a)(O,2),v=j[0],k=j[1],y=function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.get("https://emphasoft-test-assignment.herokuapp.com/api/v1/users/",{headers:{Accept:"application/json",Authorization:"Token ".concat(t)}});case 2:a=e.sent,o(a.data),b(a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){t&&localStorage.setItem("token",t),y(t)}),[]);var N=function(e){g("asc"===h?"desc":"asc"),w(h)},w=function(e){"asc"===e&&m.sort((function(e,t){return e.id>t.id?1:-1})),"desc"===e&&m.sort((function(e,t){return e.id<t.id?1:-1}))},A=function(){var e=Object(J.a)(r);b(e),b(e.filter((function(e){return e.username.toLowerCase().indexOf(v.toLowerCase())>-1})))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(W.a,{className:"tableConteiner",component:Y.a},l.a.createElement(K.a,{active:!0,direction:h,onClick:N,className:"button-for-mobile"},"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u043d\u043e\u043c\u0435\u0440\u0443"),l.a.createElement(Q.a,{placeholder:"\u0424\u0438\u043b\u044c\u0442\u0440 \u043f\u043e \u043b\u043e\u0433\u0438\u043d\u0443",inputProps:{"aria-label":"search google maps"},value:v,onChange:function(e){k(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),A())}}),l.a.createElement($.a,{"aria-label":"search",onClick:A},l.a.createElement(ne.a,null)),l.a.createElement(M.a,{className:"tableInner","aria-label":"simple table"},l.a.createElement(X.a,{className:"table-head"},l.a.createElement(Z.a,null,l.a.createElement(ee.a,{className:"cell_header"},l.a.createElement(K.a,{active:!0,direction:h,onClick:N},"\u2116")),l.a.createElement(ee.a,{className:"cell_header"},"\u0418\u043c\u044f"),l.a.createElement(ee.a,{className:"cell_header"},"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"),l.a.createElement(ee.a,{className:"cell_header"},"\u041b\u043e\u0433\u0438\u043d"),l.a.createElement(ee.a,{className:"cell_header"},"\u0410\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c"),l.a.createElement(ee.a,{className:"cell_header"},"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440"))),l.a.createElement(te.a,null,m.map((function(e){return l.a.createElement(Z.a,{component:"tr",key:e.id},l.a.createElement(ee.a,{className:"cell","aria-label":"\u041d\u043e\u043c\u0435\u0440"},e.id),l.a.createElement(ee.a,{className:"cell","aria-label":"\u0418\u043c\u044f"},e.first_name),l.a.createElement(ee.a,{className:"cell","aria-label":"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"},e.last_name),l.a.createElement(ee.a,{className:"cell","aria-label":"\u041b\u043e\u0433\u0438\u043d"},e.username),l.a.createElement(ee.a,{className:"cell","aria-label":"\u0410\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c"},!0===e.is_active?"yes":"no"),l.a.createElement(ee.a,{className:"cell","aria-label":"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440"},!0===e.is_superuser?"yes":"no"))}))))))}))),ce=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"),l.a.createElement(re,e))},le=Object(b.b)((function(e){return{isAuthorized:L(e)}}))((function(e){var t=e.isAuthorized;return l.a.createElement(l.a.Fragment,null,l.a.createElement(H.d,null,l.a.createElement(B,{path:"/table",component:ce,exact:!0,isAuthorized:t,loginPath:"/"}),l.a.createElement(H.b,{path:"/",render:function(e){return null==t||!1===t?l.a.createElement(D,e):l.a.createElement(H.a,{to:"/table"})},exact:!0}),l.a.createElement(H.a,{to:"/"})))})),oe=(a(139),Object(b.b)((function(e){return{isAuthorized:L(e)}}))((function(e){var t=e.isAuthorized,a=e.handleLogoutTry;return l.a.createElement("div",{className:"outer_div"},!0===t&&l.a.createElement(l.a.Fragment,null,l.a.createElement(O.a,{onClick:a,className:"logout_button"},"\u0412\u044b\u0439\u0442\u0438")))}))),ie=a(193),se=a(189),ue=a(187),me=a(188),de=a(186),pe=function(e){var t=e.open,a=e.handleYes,n=e.handleNo,r=e.handleClose;return l.a.createElement("div",null,l.a.createElement(ie.a,{open:t,onClose:r,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(de.a,{id:"alert-dialog-title"},"\u0412\u044b\u0445\u043e\u0434"),l.a.createElement(ue.a,null,l.a.createElement(me.a,{id:"alert-dialog-description"},"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u044b\u0439\u0442\u0438 \u0438\u0437 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f?")),l.a.createElement(se.a,null,l.a.createElement(O.a,{onClick:a,color:"primary"},"\u0414\u0430"),l.a.createElement(O.a,{onClick:n,color:"primary",autoFocus:!0},"\u041d\u0435\u0442"))))},be={logout:S},fe=Object(b.b)(null,be)((function(e){var t=e.logout,a=l.a.useState(!1),n=Object(s.a)(a,2),r=n[0],c=n[1];return l.a.createElement("div",{className:"App"},l.a.createElement(u.a,{basename:"/"},l.a.createElement(oe,{handleLogoutTry:function(){c(!0)}}),l.a.createElement(le,null),l.a.createElement(pe,{open:r,handleClose:function(){c(!1)},handleNo:function(){c(!1)},handleYes:function(){c(!1),t(),localStorage.removeItem("token")}})))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ee=a(90),he={token:localStorage.getItem("token")?localStorage.getItem("token"):null,isAuthorized:!!localStorage.getItem("token"),error:null},ge=Object(y.e)(z,he,Object(y.d)(Object(y.a)(Ee.a),Object(y.a)((function(e){return function(t){return function(){var a=Object(p.a)(d.a.mark((function a(n){var r;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.type!==w.toString()){a.next=3;break}return a.next=3,U.a.post("https://emphasoft-test-assignment.herokuapp.com/api-token-auth/",{username:n.payload.login,password:n.payload.password},{headers:{"Content-Type":"application/json"}}).then((function(t){200===t.status?e.dispatch(A(t.data)):e.dispatch(_("error"))})).catch((function(t){e.dispatch(_(t))}));case 3:return r=t(n),a.abrupt("return",r);case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}}))));i.a.render(l.a.createElement(b.a,{store:ge},l.a.createElement(fe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[105,1,2]]]);
//# sourceMappingURL=main.9d361959.chunk.js.map